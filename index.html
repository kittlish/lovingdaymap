<!DOCTYPE html>
<html>
<head>
  <meta charset='utf-8' />
  <title>Display a map</title>
  <meta name='viewport' content='initial-scale=1,maximum-scale=1,user-scalable=no' />
  <script src='https://api.tiles.mapbox.com/mapbox-gl-js/v0.53.0/mapbox-gl.js'></script>
  <link href='https://api.tiles.mapbox.com/mapbox-gl-js/v0.53.0/mapbox-gl.css' rel='stylesheet' />
  <style>

    body { margin:0; padding:0; }

    #map {
      width: 100%;
      height: 100%;
    }

    #map-container {
      width: 100vw;
      height: 50vw;
    }

    #sliderbar {
      text-align: center;
      padding: 10px;
    }

    #sliderbar input {
      display: inline-block;
      width: 80vw;
    }

  </style>
</head>
<body>

<div id='map-container'>
  <div id='map'></div>
</div>
<div class='session' id='sliderbar'>
  <p>Year: <label id='active-year'></label></p>
  <span>
    <span>1776</span>
    <input id='slider' type='range' min='1776' max='1968' step='1' value='1776' />
    <span>1968</span>
  </span>
</div>


<script>
mapboxgl.accessToken = 'pk.eyJ1IjoibGVtd2Vya3MiLCJhIjoiY2p1ZTRoYnd1MGxpNTQ0cjE0Mjl1cHRrYiJ9.kU435578KS5vrCHNwZX2kA';
const map = new mapboxgl.Map({
  container: 'map',
  style: 'mapbox://styles/lemwerks/cjups06uh0cr51flc468wbj0s',
  center: [-95.733562, 38.871847],
  maxBounds: [
    [-140, 20],
    [-50, 50]
  ]
});

map.on('load', function(loaded) {
  map.setFilter('lovingday', ['<=', ['number', ['get', 'lovingday']], 1776]);
  sliderLabel.innerText = '1776'
});

const slider = document.getElementById('slider');
const sliderLabel = document.getElementById('active-year');
slider.addEventListener('input', function(e) {
  const year = parseInt(slider.value);
  console.log(year)
  map.setFilter('lovingday', ['<=', ['number', ['get', 'lovingday']], year]);
  sliderLabel.innerText = year;
});
// 

</script>

</body>
</html>
